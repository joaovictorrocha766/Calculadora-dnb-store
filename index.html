<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNB STORE | Gest√£o & Atendimento</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root {
            --bg: #0a0f1e; --card: #161e31; --primary: #3b82f6;
            --success: #22c55e; --text: #f8fafc; --purple: #8b5cf6; --danger: #ef4444; --warning: #f59e0b;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); padding: 20px; display: flex; flex-direction: column; align-items: center; margin: 0; }
        .container { width: 100%; max-width: 650px; }
        
        .tabs { display: flex; gap: 5px; margin-bottom: 15px; width: 100%; overflow-x: auto; padding-bottom: 5px; }
        .tab-btn { flex: 1; padding: 10px; background: var(--card); border: 1px solid #2d3748; color: #94a3b8; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.75rem; white-space: nowrap; }
        .tab-btn.active { background: var(--primary); color: white; }

        .card { background: var(--card); padding: 20px; border-radius: 16px; border: 1px solid #2d3748; margin-bottom: 15px; }
        .content-section { display: none; }
        .content-section.active { display: block; }

        .status-badge { padding: 5px 12px; border-radius: 20px; font-size: 0.7rem; font-weight: bold; display: inline-block; margin-bottom: 10px; }
        .open { background: rgba(34, 197, 94, 0.2); color: var(--success); border: 1px solid var(--success); }
        .closed { background: rgba(239, 68, 68, 0.2); color: var(--danger); border: 1px solid var(--danger); }

        input, select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #2d3748; background: #0a0f1e; color: white; box-sizing: border-box; margin-bottom: 10px; }
        .btn { width: 100%; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 8px; }
        .btn-success { background: var(--success); color: white; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-purple { background: var(--purple); color: white; }
        .btn-outline { background: transparent; border: 1px solid #2d3748; color: #94a3b8; font-size: 0.8rem; }

        .msg-box { background: #0a0f1e; padding: 15px; border-radius: 8px; border: 1px dotted #3b82f6; margin-bottom: 10px; position: relative; }
        .msg-text { font-size: 0.85rem; color: #cbd5e1; line-height: 1.4; }
    </style>
</head>
<body>

<div class="container">
    <div id="statusLoja" class="status-badge">Verificando hor√°rio...</div>

    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('vendas')">üõí PDV</button>
        <button class="tab-btn" onclick="openTab('simula')">üßÆ Simula√ß√£o</button>
        <button class="tab-btn" onclick="openTab('mensagens')">üì¢ Mensagens</button>
        <button class="tab-btn" onclick="openTab('busca')">üîç Auditoria</button>
        <button class="tab-btn" onclick="openTab('config')">‚öôÔ∏è Ajustes</button>
    </div>

    <div id="vendas" class="content-section active">
        <div class="card">
            <h2 style="margin:0; color:var(--primary);">DNB STORE</h2>
            <label style="font-size: 0.7rem; color: #94a3b8;">Cliente e Quantidade</label>
            <div style="display:flex; gap:10px;">
                <input type="text" id="nomeCliente" placeholder="@Cliente">
                <input type="number" id="qtdRobux" placeholder="Qtd" oninput="calcPDV()">
            </div>
            <button class="btn btn-success" onclick="salvarVenda()">üíæ SALVAR E COPIAR RECIBO</button>
        </div>
    </div>

    <div id="simula" class="content-section">
        <div class="card">
            <h3>üßÆ Calculadora de Lucro</h3>
            <input type="number" id="simQtd" placeholder="Qtd Robux" oninput="realizarSimulacao()">
            <div id="resSimula" style="font-size: 0.9rem; background: #0a0f1e; padding: 15px; border-radius: 10px;">
                <p>Custo (Fornecedor): <span id="sCusto">R$ 0,00</span></p>
                <p>Venda (Cliente): <span id="sVenda" style="color:var(--success); font-weight:bold;">R$ 0,00</span></p>
                <hr style="border:0; border-top:1px solid #2d3748;">
                <p>Lucro Total: <span id="sLucro">R$ 0,00</span></p>
                <p>Sua Parte (50%): <span id="sJoao" style="color:var(--primary);">R$ 0,00</span></p>
                <p>Parte S√≥cio (50%): <span id="sSocio" style="color:var(--primary);">R$ 0,00</span></p>
            </div>
            <button class="btn btn-purple" onclick="copiarOrcamento()">üìã Copiar Or√ßamento</button>
        </div>
    </div>

    <div id="mensagens" class="content-section">
        <div class="card">
            <h3>üì¢ Respostas R√°pidas</h3>
            
            <div class="msg-box">
                <div class="msg-text"><strong>üåô Hor√°rio Fechado:</strong><br>Ol√°! A DNB STORE recebeu seu pedido. No momento nosso setor de entregas est√° pausado. Retornaremos √†s <span class="h-abre">08:00</span> para processar seu envio!</div>
                <button class="btn btn-outline" onclick="copiarTextoMsg('fechado')">Copiar Aviso</button>
            </div>

            <div class="msg-box">
                <div class="msg-text"><strong>üéÆ Como Comprar:</strong><br>Para receber, voc√™ precisa criar uma Gamepass no valor sugerido. Aceitamos PIX. O prazo de 'pendente' no Roblox √© de 3 a 7 dias.</div>
                <button class="btn btn-outline" onclick="copiarTextoMsg('como')">Copiar Instru√ß√£o</button>
            </div>

            <div class="msg-box">
                <div class="msg-text"><strong>‚úÖ Confirma√ß√£o:</strong><br>Pagamento aprovado! Seus Robux j√° foram enviados. Confira seu hist√≥rico de pendentes no site oficial do Roblox.</div>
                <button class="btn btn-outline" onclick="copiarTextoMsg('confirma')">Copiar Sucesso</button>
            </div>
        </div>
    </div>

    <div id="config" class="content-section">
        <div class="card">
            <h3>‚öôÔ∏è Configura√ß√µes</h3>
            <label>Hor√°rio de In√≠cio (Ex: 08):</label>
            <input type="number" id="hInicio" value="8">
            <label>Hor√°rio de T√©rmino (Ex: 22):</label>
            <input type="number" id="hFim" value="22">
            <hr>
            <label>Custo Unit√°rio:</label><input type="number" id="confCusto" value="0.0335" step="0.0001">
            <label>Venda Unit√°ria:</label><input type="number" id="confVenda" value="0.0480" step="0.0001">
        </div>
        <button class="btn btn-primary" onclick="atualizarStatus()">üíæ Salvar e Aplicar</button>
    </div>

    <div id="busca" class="content-section"> </div>
</div>

<script>
    function openTab(id) {
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function atualizarStatus() {
        const agora = new Date().getHours();
        const inicio = parseInt(document.getElementById('hInicio').value);
        const fim = parseInt(document.getElementById('hFim').value);
        const status = document.getElementById('statusLoja');
        
        document.querySelectorAll('.h-abre').forEach(el => el.innerText = inicio + ":00");

        if (agora >= inicio && agora < fim) {
            status.innerText = "‚óè LOJA ABERTA (ENTREGAS ATIVAS)";
            status.className = "status-badge open";
        } else {
            status.innerText = "‚óè LOJA FECHADA (APENAS PAGAMENTOS)";
            status.className = "status-badge closed";
        }
    }

    function realizarSimulacao() {
        const qtd = parseFloat(document.getElementById('simQtd').value) || 0;
        const cU = parseFloat(document.getElementById('confCusto').value);
        const vU = parseFloat(document.getElementById('confVenda').value);
        const cT = qtd * cU; const vT = qtd * vU; const lT = vT - cT;

        document.getElementById('sCusto').innerText = "R$ " + cT.toFixed(2);
        document.getElementById('sVenda').innerText = "R$ " + vT.toFixed(2);
        document.getElementById('sLucro').innerText = "R$ " + lT.toFixed(2);
        document.getElementById('sJoao').innerText = "R$ " + (lT/2).toFixed(2);
        document.getElementById('sSocio').innerText = "R$ " + (lT/2).toFixed(2);
    }

    function copiarTextoMsg(tipo) {
        let txt = "";
        const inicio = document.getElementById('hInicio').value;
        if(tipo === 'fechado') txt = `üåô *DNB STORE - AVISO*\n\nNossa loja est√° aberta 24/7 para pagamentos, por√©m nosso setor de *ENTREGA MANUAL* encerrou as atividades por hoje.\n\nSeu pedido foi registrado e ser√° entregue prioritariamente a partir das *${inicio}:00h*. Agradecemos a prefer√™ncia!`;
        if(tipo === 'como') txt = `üéÆ *COMO COMPRAR NA DNB STORE*\n\n1. Informe a quantidade de Robux.\n2. Crie uma Gamepass no valor que indicarmos.\n3. Envie o comprovante via PIX.\n4. N√≥s compramos sua pass e os Robux ficam pendentes na sua conta (3-7 dias).`;
        if(tipo === 'confirma') txt = `‚úÖ *SUCESSO!*\n\nSeu pedido foi processado. Os Robux j√° constam como pendentes em sua conta. Obrigado por comprar na DNB Store!`;
        
        navigator.clipboard.writeText(txt);
        alert("Mensagem copiada!");
    }

    function salvarVenda() {
        const qtd = document.getElementById('qtdRobux').value;
        const cli = document.getElementById('nomeCliente').value || "Cliente";
        if(!qtd) return alert("Quantidade vazia!");
        
        const vU = parseFloat(document.getElementById('confVenda').value);
        const vT = (qtd * vU).toFixed(2);
        const prot = "DNB-" + Math.floor(Math.random() * 999999);

        const txt = `üíé *DNB STORE - COMPROVANTE*\n\nüÜî *PROT:* ${prot}\nüë§ *CLIENTE:* ${cli}\nüì¶ *PRODUTO:* ${qtd} Robux\nüí∞ *VALOR:* R$ ${vT}\n‚úÖ *STATUS:* CONCLU√çDO`;
        navigator.clipboard.writeText(txt);
        alert("Venda registrada e Recibo copiado!");
    }

    setInterval(atualizarStatus, 60000);
    atualizarStatus();
</script>
</body>
</html>

